(function(e){function t(e){return e.text||Z(e)}function n(e){return e.pos||et(e)}function r(e){return t(e).substring(0,n(e))}function i(e){return t(e).substring(n(e))}function s(e){return $(t(e))}function o(e){return s(e).length}function u(e){return $(r(e))}function a(e){return $(i(e))}function f(e){return u(e).allButLast()}function l(e){return a(e).allButFirst()}function c(e){return e.text=e.text||t(e),$(t(e))[h(e)]}function h(e){return f(e).length}function p(e){return u(e).last()}function d(e){return a(e).first()}function v(e){return p(e).length}function m(e){return d(e).length}function g(e){return e.pos=e.pos||n(e),n-v(e)}function y(e){return e.pos=e.pos||n(e),n+m(e)}function b(e){return J(c(e))}function w(e){return b(e).length}function E(e){return J(p(e))}function S(e){return J(d(e))}function x(e){return E(e).allButLast()}function T(e){return S(e).allButFirst()}function N(e){return J(t(e))}function C(e){return N(e).length}function k(e){return J(r(e))}function L(e){return J(i(e))}function A(e){return k(e).allButLast()}function O(e){return L(e).allButFirst()}function M(e){return e.text=e.text||t(e),e.pos=e.pos||n(e),_(e)+D(e)}function _(e){return E(e).last()}function D(e){return S(e).first()}function P(e){return _(e).length}function H(e){return D(e).length}function B(e){return e.pos=e.pos||n(e),n-P(e)}function j(e){return e.pos=e.pos||n(e),n+H(e)}function F(e){return e.pos=e.pos||n(e),v(e)-P(e)}function I(e){return e.pos=e.pos||n(e),v(e)+H(e)}function q(e,t){var n=t==="lineEnd"?n(e):p(e);if(!n||t==="lineStart")return 0;P(e)===0?t="wordStart":t==="wordStart"&&(n=n.slice(0,-P(e))),t==="wordEnd"&&(n+=D(e));var r=it(e,!1),i=ut(e),s=/\W+/g,o=n.split(s),u=n.match(s),a=0;console.log(t),console.log(n),n="",console.log(o);do M=o[a],s=u&&u[a]||"",t||(M+=o[a]===o.last()?D(e):""),length=ot(n+=M+s,r),length>i&&(a--,n="");while(o[++a]);return t||(length=ot(n.replace(M,o.last()),r)),length}function R(e){return st(r(e),it(e,!0))}function U(e,t){return{x:q(e,t),y:20}}function z(e){return U(e,"lineStart")}function W(e){return U(e,"lineEnd")}function X(e){return U(e,"wordStart")}function V(e){return U(e,"wordEnd")}function $(e){return e.split("\n")}function J(e){return e.split(/\W+/)}function K(e,t){return(e=e.split(t)).last()?e:e.allButLast()}function G(e){return e=e.jquery?e.get(0):e,e&&e instanceof HTMLElement&&e.nodeName.toLowerCase()==="textarea"?e:null}function Y(e){return parseInt(window.getComputedStyle(e,null).getPropertyValue("line-height"))}function Z(e){return e.value}function et(e){var t=0;if(document.selection){e.focus();var n=document.selection.createRange(),r=document.selection.createRange().text.length;n.moveStart("character",-e.value.length),t=n.text.length-r}else if(e.selectionStart||e.selectionStart=="0")t=e.selectionStart;return t}function tt(e,t){if(e.setSelectionRange)e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}}function nt(e){var t=this.textarea;t.select(),t.mouseup(function(){return t.unbind("mouseup"),!1})}function rt(e){return document.selection?document.selection.getRange().text.length>0:e.selectionStart!==e.selectionEnd}function it(e,t){var n;return(n=document.getElementById("gami-copy"))||(n=document.createElement("div"),n.setAttribute("id","gami-copy"),n.style.visibility="hidden",n.style.font=window.getComputedStyle(e,null).getPropertyValue("font"),e.parentNode.appendChild(n)),n.style.width=t?ut(e)+"px":"auto",n.style.display=t?"block":"inline-block",n}function st(e,t){e=e.replace("\n","<br>");if(!e||/<br>\W*$/.test(e))e+=".";return t.innerHTML=e,t.offsetHeight}function ot(e,t){return t.innerHTML=e.replace(/ /g,"&nbsp;"),ut(t)}function ut(e){return e.offsetWidth}Array.prototype.first=function(){return this[0]},Array.prototype.last=function(){return this[this.length-1]},Array.prototype.allButFirst=function(){return this.slice(1)},Array.prototype.allButLast=function(){return this.slice(0,-1)};if(e){var Q={text:t,pos:n,before:r,after:i,lines:s,numLines:o,beforeLines:u,afterLines:a,linesBefore:f,linesAfter:l,line:c,lineNum:h,lineBefore:p,lineAfter:d,linePos:v,lineDist:m,lineStart:g,lineEnd:y,words:b,numWords:w,beforeWords:E,afterWords:S,wordsBefore:x,wordsAfter:T,allWords:N,wordCount:C,allBeforeWords:k,allAfterWords:L,allWordsBefore:A,allWordsAfter:O,word:M,wordBefore:_,wordAfter:D,wordPos:P,wordDist:H,wordStart:B,wordEnd:j,lineWordStart:F,lineWordEnd:I,X:q,Y:R,XY:U,lineXY:z,lineEndXY:W,wordXY:X,wordEndXY:V};e.fn.gami=function(e,t){var r=G(this);if(r)return r.text=r.pos=null,t&&(r.pos=n(r)+t),Q[e](r)}}})(window.jQuery);